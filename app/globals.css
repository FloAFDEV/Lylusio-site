@tailwind base;
@tailwind components;
@tailwind utilities;

/* Hide scrollbar for horizontal scroll on mobile */
.scrollbar-hide {
	-ms-overflow-style: none;
	scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
	display: none;
}

/* Lylusio Design System - Soft, Organic & Ethereal Aesthetic */

/* Prevent layout shift from scrollbar */
html {
	overflow-y: scroll;
}

@layer base {
	:root {
		/* Soft warm palette - more ethereal */
		--background: 40 35% 97%;
		--foreground: 220 20% 25%;

		--card: 40 30% 99%;
		--card-foreground: 220 20% 25%;

		--popover: 40 30% 99%;
		--popover-foreground: 220 20% 25%;

		/* Soft navy - warmer */
		--primary: 220 30% 30%;
		--primary-foreground: 40 35% 97%;

		/* Warm cream - softer */
		--secondary: 35 30% 93%;
		--secondary-foreground: 220 20% 25%;

		/* Soft muted - better contrast */
		--muted: 35 25% 92%;
		--muted-foreground: 220 20% 32%;

		/* Soft peach-rose accent - feminine and warm */
		--accent: 25 70% 66%;
		--accent-foreground: 0 0% 100%; /* White for maximum contrast on peach background */

		/* Soft CTA - gentle peach/blush */
		--cta: 15 50% 70%;
		--cta-foreground: 220 25% 20%;
		--cta-hover: 15 55% 65%;

		--destructive: 0 70% 55%;
		--destructive-foreground: 0 0% 100%;

		--border: 35 25% 90%;
		--input: 35 25% 90%;
		--ring: 18 45% 60%;

		--radius: 1.25rem;

		/* Custom design tokens - WCAG AAA compliant gold (7.5:1 contrast ratio) */
		--gold: 42 75% 28%; /* Or véritable plus foncé pour contraste optimal */
		--gold-light: 42 65% 38%; /* Harmonisé avec nouvelle teinte */
		--navy: 220 35% 25%;
		--navy-light: 220 25% 40%;
		--sand: 35 30% 93%;
		--sand-light: 40 35% 97%;
		--cream: 40 30% 99%;

		/* Shadows - ultra soft and diffuse avec glow doré premium */
		--shadow-soft: 0 8px 32px -8px hsl(220 20% 40% / 0.06);
		--shadow-medium: 0 16px 48px -12px hsl(220 20% 40% / 0.1);
		--shadow-glow: 0 0 40px hsl(42 80% 55% / 0.3), 0 0 20px hsl(42 75% 50% / 0.2), 0 8px 32px hsl(42 70% 45% / 0.15);

		/* Glass effect - more ethereal */
		--glass-bg: hsl(40 30% 99% / 0.85);
		--glass-border: hsl(35 25% 90% / 0.5);

		--sidebar-background: 0 0% 98%;
		--sidebar-foreground: 240 5.3% 26.1%;
		--sidebar-primary: 240 5.9% 10%;
		--sidebar-primary-foreground: 0 0% 98%;
		--sidebar-accent: 240 4.8% 95.9%;
		--sidebar-accent-foreground: 240 5.9% 10%;
		--sidebar-border: 220 13% 91%;
		--sidebar-ring: 217.2 91.2% 59.8%;
	}

	.dark {
		--background: 220 25% 10%;
		--foreground: 40 25% 95%;

		--card: 220 22% 14%;
		--card-foreground: 40 25% 95%;

		--popover: 220 22% 14%;
		--popover-foreground: 40 25% 95%;

		--primary: 30 55% 55%;
		--primary-foreground: 220 25% 10%;

		--secondary: 220 20% 18%;
		--secondary-foreground: 40 25% 95%;

		--muted: 220 18% 16%;
		--muted-foreground: 40 18% 60%;

		--accent: 30 55% 55%;
		--accent-foreground: 220 25% 10%;

		--destructive: 0 60% 35%;
		--destructive-foreground: 0 0% 100%;

		--border: 220 18% 22%;
		--input: 220 18% 22%;
		--ring: 30 55% 55%;

		--sidebar-background: 240 5.9% 10%;
		--sidebar-foreground: 240 4.8% 95.9%;
		--sidebar-primary: 224.3 76.3% 48%;
		--sidebar-primary-foreground: 0 0% 100%;
		--sidebar-accent: 240 3.7% 15.9%;
		--sidebar-accent-foreground: 240 4.8% 95.9%;
		--sidebar-border: 240 3.7% 15.9%;
		--sidebar-ring: 217.2 91.2% 59.8%;
	}
}

@layer base {
	* {
		@apply border-border;
	}

	html {
		scroll-behavior: smooth;
	}

	body {
		@apply bg-background text-foreground antialiased font-body;
		letter-spacing: 0.01em;
	}

	/* Focus visible styles for keyboard navigation (WCAG 2.4.7) */
	*:focus-visible {
		outline: 3px solid hsl(var(--gold));
		outline-offset: 3px;
		border-radius: 6px;
		box-shadow: 0 0 0 4px hsl(var(--gold) / 0.2);
	}

	/* Override for buttons and interactive elements */
	button:focus-visible,
	a:focus-visible,
	input:focus-visible,
	textarea:focus-visible,
	select:focus-visible {
		outline: 3px solid hsl(var(--gold));
		outline-offset: 2px;
		box-shadow: 0 0 0 4px hsl(var(--gold) / 0.25), 0 0 12px hsl(var(--gold) / 0.4);
	}

	/* Typography - elegant and airy */
	h1 {
		@apply text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-normal leading-[1.2] tracking-tight font-display;
	}

	h2 {
		@apply text-2xl sm:text-3xl md:text-4xl font-normal leading-[1.25] font-display;
	}

	h3 {
		@apply text-xl sm:text-2xl md:text-3xl font-normal leading-snug font-display;
	}

	h4 {
		@apply text-lg sm:text-xl md:text-2xl font-normal font-display;
	}

	p {
		@apply text-base leading-[1.75] font-body;
	}

	/* Legacy first-letter classes removed - use FancyLetter component instead */

	/* Body text sizes */
	.text-body-lg {
		@apply text-lg leading-[1.85];
	}

	.text-body-sm {
		@apply text-sm leading-relaxed;
	}
}

@layer components {
	.section-padding {
		@apply py-20 md:py-28 lg:py-36;
	}

	.section-padding-sm {
		@apply py-14 md:py-20 lg:py-24;
	}

	.container-narrow {
		@apply max-w-3xl mx-auto px-5 md:px-6;
	}

	.container-wide {
		@apply max-w-6xl mx-auto px-5 md:px-8 lg:px-12;
	}

	.card-soft {
		@apply bg-card p-8 md:p-10 shadow-soft transition-all duration-500;
		border-radius: 1.5rem;
	}

	.card-soft:hover {
		@apply shadow-medium;
		transform: translateY(-4px);
	}

	/* Labels and tags */
	.section-label {
		@apply text-accent text-xs md:text-[13px] uppercase tracking-[0.2em] mb-4 md:mb-5;
		font-family: "Source Sans 3", sans-serif;
		font-weight: 500;
	}

	/* Soft image containers - organic shapes */
	.image-soft {
		@apply overflow-hidden shadow-soft;
		border-radius: 1.5rem;
	}

	.image-organic {
		@apply overflow-hidden shadow-medium;
		border-radius: 50% 50% 45% 55% / 55% 55% 45% 45%;
	}

	/* Responsive video containers for blog posts */
	.video-responsive {
		@apply relative w-full my-6 rounded-xl overflow-hidden shadow-md;
		padding-bottom: 56.25%; /* 16:9 aspect ratio */
		max-width: 100%;
		background-color: hsl(var(--muted));
	}

	.video-responsive iframe,
	.video-responsive video {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		border: 0;
		border-radius: inherit;
	}

	.video-figure {
		@apply max-w-full overflow-hidden my-6;
	}

	.video-figure .wp-block-embed__wrapper {
		@apply relative w-full;
		padding-bottom: 56.25%;
	}

	.video-figure .wp-block-embed__wrapper iframe {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		border: 0;
	}

	.video-native {
		@apply w-full h-auto max-w-full rounded-xl;
	}

	/* Prevent any iframe/video from overflowing */
	.prose iframe,
	.prose video {
		max-width: 100% !important;
	}

	/* Skip link for accessibility - hidden until focused */
	.skip-link {
		@apply sr-only focus:not-sr-only focus:absolute focus:left-4 focus:top-4 focus:z-[100] focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-lg;
	}
}

@layer utilities {
	.shadow-soft {
		box-shadow: var(--shadow-soft);
	}

	.shadow-medium {
		box-shadow: var(--shadow-medium);
	}

	.shadow-glow {
		box-shadow: var(--shadow-glow);
	}

	/* Shimmer animation for animated borders */
	@keyframes shimmer {
		0% {
			background-position: 200% 0%;
		}
		100% {
			background-position: -200% 0%;
		}
	}

	/* Floating animations for decorative elements */
	@keyframes pulse-slow {
		0%,
		100% {
			opacity: 0.6;
			transform: scale(1);
		}
		50% {
			opacity: 0.8;
			transform: scale(1.05);
		}
	}

	.animate-pulse-slow {
		animation: pulse-slow 6s ease-in-out infinite;
	}

	/* Smooth spring animation for mobile menu */
	@keyframes spring-in {
		0% {
			opacity: 0;
			transform: scale(0.9) translateY(-20px);
		}
		50% {
			transform: scale(1.02) translateY(-5px);
		}
		100% {
			opacity: 1;
			transform: scale(1) translateY(0);
		}
	}

	.animate-spring-in {
		animation: spring-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
	}

	/* Smooth fade slide for menu items */
	@keyframes fade-slide-in {
		0% {
			opacity: 0;
			transform: translateY(20px) scale(0.95);
		}
		100% {
			opacity: 1;
			transform: translateY(0) scale(1);
		}
	}

	.animate-fade-slide-in {
		animation: fade-slide-in 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
	}

	.bg-gradient-radial {
		background: radial-gradient(circle, var(--tw-gradient-stops));
	}

	@keyframes float {
		0%,
		100% {
			transform: translateY(0px);
		}
		50% {
			transform: translateY(-12px);
		}
	}

	@keyframes float-delayed {
		0%,
		100% {
			transform: translateY(0px);
		}
		50% {
			transform: translateY(-8px);
		}
	}

	@keyframes float-slow {
		0%,
		100% {
			transform: translateY(0px);
		}
		50% {
			transform: translateY(-6px);
		}
	}

	.animate-float {
		animation: float 6s ease-in-out infinite;
	}

	.animate-float-delayed {
		animation: float-delayed 7s ease-in-out infinite;
		animation-delay: 1s;
	}

	.animate-float-slow {
		animation: float-slow 8s ease-in-out infinite;
		animation-delay: 2s;
	}

	/* Font utilities - using CSS variables from next/font */
	.font-display {
		font-family: var(--font-display), Georgia, serif;
	}

	.font-body {
		font-family: var(--font-body), -apple-system, BlinkMacSystemFont, sans-serif;
	}

	.font-calligraphic {
		font-family: var(--font-calligraphic), cursive;
	}

	/* Screen reader only */
	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border: 0;
	}
}

/* ========================================
   ANIMATIONS
======================================== */

@keyframes fadeUp {
	from {
		opacity: 0;
		transform: translateY(20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

@keyframes scaleIn {
	from {
		opacity: 0;
		transform: scale(0.95);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

@keyframes float {
	0%,
	100% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(-10px);
	}
}

@keyframes gentlePulse {
	0%,
	100% {
		opacity: 0.4;
		transform: scale(1);
	}
	50% {
		opacity: 0.7;
		transform: scale(1.05);
	}
}

@keyframes twinkle {
	0%,
	100% {
		opacity: 0.2;
		transform: scale(1);
	}
	50% {
		opacity: 0.8;
		transform: scale(1.2);
	}
}

@keyframes signatureReveal {
	0% {
		clip-path: inset(0 100% 0 0);
		opacity: 0;
	}
	10% {
		opacity: 1;
	}
	100% {
		clip-path: inset(0 0 0 0);
		opacity: 1;
	}
}

/* Click-to-reveal slide up animation */
@keyframes revealSlideUp {
	from {
		opacity: 0;
		transform: translateY(4px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Contact reveal animation - smooth golden appearance */
@keyframes revealContact {
	0% {
		opacity: 0;
		transform: translateY(6px);
	}
	100% {
		opacity: 1;
		transform: translateY(0);
	}
}

.animate-reveal-contact {
	animation: revealContact 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-fade-up {
	animation: fadeUp 0.6s ease-out forwards;
	opacity: 0;
}

.animate-fade-in {
	animation: fadeIn 0.6s ease-out forwards;
}

.animate-scale-in {
	animation: scaleIn 0.5s ease-out forwards;
}

.animate-float {
	animation: float 6s ease-in-out infinite;
}

.animate-gentle-pulse {
	animation: gentlePulse 4s ease-in-out infinite;
}

.animate-twinkle {
	animation: twinkle 2s ease-in-out infinite;
}

.animate-handwriting {
	animation: signatureReveal 5s ease-out forwards;
	animation-delay: 0.8s;
	opacity: 0;
}

/* Floating particles animation */
@keyframes float-particle {
	0%,
	100% {
		transform: translateY(0) translateX(0);
		opacity: var(--opacity, 0.3);
	}
	25% {
		transform: translateY(-30px) translateX(var(--drift, 10px));
		opacity: calc(var(--opacity, 0.3) * 1.2);
	}
	50% {
		transform: translateY(-15px) translateX(calc(var(--drift, 10px) * -0.5));
		opacity: var(--opacity, 0.3);
	}
	75% {
		transform: translateY(-45px) translateX(var(--drift, 10px));
		opacity: calc(var(--opacity, 0.3) * 0.8);
	}
}

.animate-float-particle {
	animation: float-particle var(--duration, 20s) ease-in-out infinite;
}

/* Shimmer loading effect */
@keyframes shimmer {
	0% {
		background-position: -200% 0;
	}
	100% {
		background-position: 200% 0;
	}
}

.shimmer-loading {
	position: relative;
	overflow: hidden;
	background: linear-gradient(
		90deg,
		hsl(var(--muted)) 0%,
		hsl(var(--sand) / 0.8) 20%,
		hsl(var(--muted)) 40%,
		hsl(var(--muted)) 100%
	);
	background-size: 200% 100%;
	animation: shimmer 1.5s ease-in-out infinite;
}

/* Video container styles for blog content */
.video-container {
	position: relative;
	width: 100%;
	max-width: 100%;
	padding-bottom: 56.25%;
	height: 0;
	overflow: hidden;
	border-radius: 0.75rem;
	box-shadow: var(--shadow-soft);
	margin: 1.5rem 0;
}

.video-container iframe {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	border: 0;
	border-radius: 0.75rem;
}

/* Prose overrides for embedded content */
.prose iframe {
	max-width: 100% !important;
}

.prose figure.wp-block-embed {
	max-width: 100%;
	overflow: hidden;
}

/* Loader animations */
@keyframes loader-float {
	0%,
	100% {
		transform: translateY(0) rotate(0deg);
	}
	50% {
		transform: translateY(-8px) rotate(5deg);
	}
}

@keyframes loader-pulse {
	0%,
	100% {
		transform: scale(1);
		opacity: 0.3;
	}
	50% {
		transform: scale(1.3);
		opacity: 0.6;
	}
}

@keyframes loader-dots {
	0%,
	80%,
	100% {
		transform: scale(0.6);
		opacity: 0.3;
	}
	40% {
		transform: scale(1);
		opacity: 1;
	}
}

.animate-loader-float {
	animation: loader-float 2s ease-in-out infinite;
}

.animate-loader-pulse {
	animation: loader-pulse 2s ease-in-out infinite;
}

.animate-loader-dots {
	animation: loader-dots 1.4s ease-in-out infinite;
}

/* Smooth scroll offset for fixed header */
html {
	scroll-padding-top: 120px;
}

/* Selection color */
::selection {
	background: hsl(var(--accent) / 0.25);
	color: hsl(var(--foreground));
}

/* Link underline animation */
.link-elegant {
	position: relative;
	transition: transform 0.25s ease-out, color 0.25s ease-out;
}

.link-elegant:hover {
	transform: translateY(-1px);
}

.link-elegant::after {
	content: "";
	position: absolute;
	bottom: -2px;
	left: 0;
	width: 100%;
	height: 1px;
	background: hsl(var(--accent));
	transform: scaleX(0);
	transform-origin: right;
	transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.link-elegant:hover::after {
	transform: scaleX(1);
	transform-origin: left;
}

/* Micro-interaction for all interactive links */
a:not(.link-elegant):not([class*="button"]) {
	transition: color 0.2s ease-out, transform 0.2s ease-out,
		opacity 0.2s ease-out;
}

a:not(.link-elegant):not([class*="button"]):hover {
	opacity: 0.85;
}

/* Focus visible styles for accessibility */
:focus-visible {
	outline: 2px solid hsl(var(--accent));
	outline-offset: 2px;
}

button:focus-visible,
a:focus-visible {
	outline: 2px solid hsl(var(--accent));
	outline-offset: 2px;
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}

	.animate-float,
	.animate-float-delayed,
	.animate-float-slow,
	.animate-gentle-pulse,
	.animate-twinkle,
	.animate-handwriting {
		animation: none !important;
	}
}

/* Enhanced focus visibility for accessibility */
:focus-visible {
	outline: 2px solid hsl(var(--accent));
	outline-offset: 2px;
}

button:focus-visible,
a:focus-visible,
[role="button"]:focus-visible {
	outline: 2px solid hsl(var(--accent));
	outline-offset: 2px;
	border-radius: 0.25rem;
}

/* Improve contrast for links */
a {
	text-underline-offset: 0.15em;
}

/* Smooth scroll for anchor links only */
html {
	scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
	html {
		scroll-behavior: auto;
	}
}

/* GPU-accelerated animations for better performance */
.transform-gpu {
	transform: translateZ(0);
	will-change: transform;
	backface-visibility: hidden;
}

/* will-change optimization - use sparingly */
.will-change-transform {
	will-change: transform;
}

.will-change-opacity {
	will-change: opacity;
}

/* Mobile-specific optimizations */
@media (max-width: 767px) {
	/* Reduce animation complexity on mobile */
	.animate-float,
	.animate-float-delayed,
	.animate-float-slow {
		animation-duration: 8s;
	}

	/* Disable expensive blur effects on mobile */
	.blur-3xl,
	.blur-2xl {
		filter: blur(24px);
	}

	/* Reduce backdrop blur for better performance */
	.backdrop-blur-xl,
	.backdrop-blur-2xl {
		backdrop-filter: blur(12px);
		-webkit-backdrop-filter: blur(12px);
	}

	/* Optimize touch targets for mobile (minimum 44x44px) */
	button,
	a,
	[role="button"] {
		min-height: 44px;
		min-width: 44px;
	}

	/* Prevent text size adjustment on orientation change */
	body {
		-webkit-text-size-adjust: 100%;
		text-size-adjust: 100%;
	}
}

/* Improve contrast for muted text - WCAG AAA compliance */
.text-muted-foreground {
	color: hsl(220 20% 32%);
}

/* High contrast mode support */
@media (prefers-contrast: high) {
	:root {
		--muted-foreground: 220 20% 30%;
		--accent: 18 60% 45%;
	}

	.text-muted-foreground {
		color: hsl(220 20% 30%);
	}
}

/* Print styles */
@media print {
	.skip-link,
	header,
	footer,
	nav,
	.no-print {
		display: none !important;
	}

	body {
		font-size: 12pt;
		line-height: 1.5;
	}

	a[href]::after {
		content: " (" attr(href) ")";
	}
}

.video-responsive {
	width: 100%;
	max-width: 800px; /* largeur max sur grand écran */
	margin: 1.5rem auto; /* centrage vertical + horizontal */
	position: relative;
	padding-bottom: 56.25%; /* ratio 16:9 */
	height: 0;
}

.video-responsive iframe,
.video-responsive video {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	border: 0;
	border-radius: 1rem;
}

.prose > p,
.prose > h1,
.prose > h2,
.prose > h3,
.prose > h4,
.prose > ul,
.prose > ol,
.prose > blockquote {
	text-align: center;
}

@media (min-width: 1024px) {
	.video-responsive {
		max-width: 1000px;
	}
}
